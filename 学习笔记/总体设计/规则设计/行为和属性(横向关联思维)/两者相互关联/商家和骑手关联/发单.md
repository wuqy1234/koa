> > > > >    第1页

### 等待商家出货超时

==来自于骑手==

----





### 订单发布模式

[`商家和骑手关联`](..\行为和属性(横向关联思维)\两者相互关联\商家和骑手关联\发单.md)

##### 1、使用场景

记得味千拉面和一些类似的主要做堂食的知名大餐厅加工速度都很慢。记得在南昌送外卖期间，接菜市场的订单，有些老板拣货时间特别长，这类商品根本不会因为时间问题影响口感。所以商家可以选择两种模式，一种是等候模式，一种是自动发布订单模式。

##### 2、等候模式

商家最怕的是食品做好了，没有骑手接单，然而时间久了，会影响食用，影响口感。像这一类食品，必须为骑手接单后，商家才开始加工，此类商品需要骑手等待，等待费用由商家设置。等候模式，只声明预计多久发布，声明的时间内等候费是多少，超过声明的等候时间的等候费又是多少。

##### 3、自动发布模式

自动发布模式，商家可以修改订单自动发布时间间隔。自动发布订单模式会因骑手的等待时长自动把发布订单时间间隔动态调整，当后面的骑手不再提交等候时间时，订单发布时间间隔恢复正常。同时骑手等待时间超过五分钟，骑手就能抛出此订单了，等待下一个骑手接，下一个骑手如果还因为这个订单等待了五分钟，也能抛出，第三个骑手再抛一次，那么这个订单就取消了。

###### 3.1  实现思路

嵌套的`settimeout`定时器来实现间隔多长时间发布下一个订单。

##### 4、取消订单

商家可以随时取消一个未被骑手接单的订单。

> 等候模式、自动发布订单模式、骑手抛出订单(骑手端)、

==来自于商家==

----





