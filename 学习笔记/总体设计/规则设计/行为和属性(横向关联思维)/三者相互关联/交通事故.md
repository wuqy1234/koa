#### ==新增的思路==

----

发生交通事故，骑手转单，接单的其他骑手的配送时间是商家设置的，配送金额也是商家设定的

商家设定重新计时是按顾客离骑手发生事故的位置，顾客手中的订单量，而重新计时的，配送金额也有起步价，再加上距离来计算配送金额的，退货的规则也会因订单的配送时间的重置而重新更新。

发生交通事故，商品可能发生损坏的情况，如果我是骑手，自己就不喜欢接这类订单，风险很大，顾客差评的概率会很大，不收货的概率也会很大。

只要骑手发生了交通事故，骑手在交通事故的设置中发起转单后，只要骑手开启交通事故模式，那么订单就会被其他的骑手接，交通事故模式，会一直开启，直到此骑手的转单申请被别人接单后才会自动关闭，或者手动关闭，同时在开启了交通事故模式会自动关闭骑手的自动接单功能，此模式不会再接其他订单，同时手中未配送掉的订单会自动发布出去，其他骑手就能接单了。

由于这个订单的风险很大，所以其他骑手的配送费也会较高，除了商家设定的配送费外，还有一部分来自于骑手。当发生了交通事故时，系统会自动通知顾客骑手发生了交通事故，顾客就能选择交由其他骑手配送，或者拒收，不过要支付返程配送费，拒收的订单由其他骑手帮忙去找商家退款。需要继续配送的订单，订单移交给其他骑手配送，配送时间可能会长一些，同时会赔偿顾客因骑手发生交通事故而带来的损失，顾客将少付一些费用，然后配送时间会重新计算，因此接单的其他骑手接此类订单，付给发生交通事故的骑手的订单金额会少很多，所以高风险，高回报，这种情况下的退货规则由商家设定，对于那些损坏不能配送的订单发生交通事故的骑手需要手动取消(即使是没有损坏的也能取消)，不会扣除信用分，不能配送的订单由接单的骑手来界定，如果商品损坏的订单，骑手故意诱导顾客拒收，同时支付返程配送费，那么这个订单不能免责取消，其他接单骑手也不敢接，因为不知道商家能返还多少钱，进入退货流程的订单，只有商家能够把这单消除，骑手强制消除，会扣除信用分。对于哪些免责取消的订单会通知顾客，骑手已经免责取消了。对于支付了定金的顾客，骑手需要赔偿顾客的定金。骑手打算在每一单上增加多少转单费，由骑手设定。对于没有失去意识，且骑手无法在事故现场等待的情况(较为急迫的情况)，骑手能把订单直接放在一处，并上传图片视频文字等描述信息，其他的接单骑手就能直接决定选择哪些订单能配送，就配送哪些订单，如果觉得没有一个订单能配送，那么就能直接抛出，等待下一个骑手来接单，下一个骑手也是一样的判断，那么这个转单的请求就会自动取消，所有的订单也会自动取消，发生事故的骑手也不会因此受到处罚。

记得自已在送外卖的过程中，交警查车，把自己的车子扣了，导致手中的好几个订单无法配送，造成了比普通人还要大的损失。所以交通事故模式也适用于这种情况。

如果骑手发生的交通事故导致骑手失去了意识，那么系统会自动判断骑手的位置变化情况，如果在5分钟内骑手的位置还没有变化会自动关闭自动接单模式，再次开启需要骑手手动点击开启。或者骑手开启了驻守模式，骑手在一个位置待很长时间也不会自动关闭自动接单模式，除非骑手的位置发生了变化，才能自动解除驻守模式，否则会一直开启自动接单模式。

骑手会有上线和下线的开关，骑手上线了后能开启自动接单和手动抢单，抢单的界面大多都是别人拒绝的订单，周围没有骑手未自动分派给其他骑手的订单，这些订单会出现抢单界面。商家发布的订单会，派单规则会先获取附近的骑手的位置信息，然后是信用分的信息，再是骑手设置的自动接单的规则。位置永远是在大的优先级，其次才是信用分，再次是骑手设置的自动接单规则。骑手在一个地方等单，需要开启驻守模式，否则会自动关闭自动接单模式，当骑手开启了驻守模式，骑手一旦移动了一定距离就会自动开启自动接单模式，驻守模式的接单优先级和自动接单模式的接单优先级是一样的。自动关闭自动接单的目的就是为了防止骑手发生交通事故时，系统还在给他派单。骑手在等待顾客的时候，也会自动开启驻守模式(等候模式)，这样就能在等待的过程中，也能自动接单。

记得以前自己送外卖的时候，回家的过程中忘记了下线，导致快到家门口了还接了一单，并且那个订单配送目的地离家还是很远的，取消还要受到处罚，导致自己不得不送，因此设计一个回家模式，所有的订单都必须是骑手回家路径上的订单，否则不会自动接单。

拒单会遭受处罚，其实有点逼迫骑手的感觉，一切糟糕的派单规则都让骑手承受，是完全不对的，他们的这些设计其实就是避免订单长时间没人接而设计的。只考虑了商家和顾客的利益，没有考虑骑手的超时风险，这也是导致骑手闯红灯的一个重要因素，也是导致发生交通事故的一个因素。

----



