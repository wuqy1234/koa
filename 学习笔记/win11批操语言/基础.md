> bat文件中有类似js中的console.log的输出日志的函数吗?

在批处理脚本（.bat或.cmd文件）中，并没有直接与JavaScript的`console.log`相对应的函数，但是你可以使用`echo`命令来达到类似的效果。`echo`命令用于在命令行界面输出文本，这在批处理脚本中常用于调试或向用户显示信息。

例如，在批处理脚本中，你可以这样使用`echo`：

```sh
echo 这是一条日志信息
```

如果想要将日志信息输出到一个文件中，你可以使用重定向操作符`>`或`>>`。`>`会覆盖目标文件中的现有内容，而`>>`则会在文件末尾追加内容。

示例：

```sh
echo 这是一条日志信息 >> log.txt
```

此外，你还可以结合使用`set`命令和`echo`命令来输出变量的值，类似于`console.log`输出变量：

```sh
set myVar=Hello World
echo %myVar%
```

这些输出通常是在命令行窗口中显示的，但如果脚本正在后台运行，可能需要查看日志文件才能看到这些信息。

> @echo off是什么意思?

在批处理脚本（.bat 或 .cmd 文件）中，`@echo off` 是一个非常常用的命令，它的作用是禁止后续命令的显示。具体来说：

- `echo` 是一个命令，用于显示一行文本或者变量的值。
- `off` 是 `echo` 命令的一个参数，用于关闭命令的显示。
- `@` 符号用于隐藏紧跟其后的命令的显示，即它会阻止这一行的命令本身被打印到屏幕上。

当你在批处理文件的开头使用 `@echo off`，那么在执行脚本时，所有的命令行都不会显示在控制台窗口中，只有命令执行的结果会被显示。这使得脚本的输出更加干净，避免了命令行文本的杂乱。

例如，如果你有以下的批处理脚本：

```sh
@echo off
echo Hello, World!
dir
```

执行这个脚本时，你只会看到 "Hello, World!" 和 `dir` 命令的输出结果，而不会看到 "echo Hello, World!" 和 "dir" 这些命令行本身。如果没有 `@echo off`，那么控制台还会显示这两行命令文本。

> 在bat文件中set REPO_DIR=%~dp0，是读取文件所在文件夹路径，对吗?

是的，你的理解正确。

在批处理脚本中，`%~dp0` 是一个特殊的变量引用和修饰符组合，用来获取调用该批处理文件的完整路径和文件名，但是通过修饰符 `d` 和 `p` 的使用，我们可以分别获取到驱动器盘符和路径部分。

- `%0` 表示批处理文件本身的完整路径和文件名。
- `%~dp0` 中的 `~` 表示要进行扩展，`d` 表示获取驱动器盘符，`p` 表示获取路径。

所以，`%~dp0` 实际上返回的是批处理文件所在的完整路径，不包括文件名。当我们在批处理脚本中使用：

```bash
set REPO_DIR=%~dp0
```

这行代码就会将批处理文件所在的目录路径赋值给 `REPO_DIR` 变量。需要注意的是，由于 `%~dp0` 返回的路径末尾会包含一个反斜杠 `\`，因此如果需要的话，可以在使用 `REPO_DIR` 时去掉多余的反斜杠，或者根据具体需求决定是否保留。

> 怎么去除多余的反斜杠?

在批处理脚本中，要去除使用 `%~dp0` 获取的路径末尾多余的反斜杠，可以使用字符串处理技巧。一种常见的做法是使用延迟扩展（delayed expansion）和条件语句来检查并移除路径末尾的反斜杠。

首先，你需要启用延迟扩展，然后在变量中存储路径，接着检查并修改变量。以下是一个示例：

```sh
@echo off
setlocal EnableDelayedExpansion

set REPO_DIR=%~dp0
::通过if判断，路径末尾是否为反斜杠，是的话就移除
if "!REPO_DIR:~-1!" == "\" (
::移除到数第一个字符
    set "REPO_DIR=!REPO_DIR:~0,-1!"
)

echo Repository directory is: !REPO_DIR!
endlocal
```

这段代码中：

- `setlocal EnableDelayedExpansion` 启用了延迟扩展，允许在循环或条件语句中动态地引用变量。
- `set REPO_DIR=%~dp0` 设置 `REPO_DIR` 为批处理文件的路径。
- `if "!REPO_DIR:~-1!" == "\"` 检查路径的最后一个字符是否为反斜杠。
- 如果是反斜杠，使用 `set "REPO_DIR=!REPO_DIR:~0,-1!` 去除它。









```javascript
@echo off
setlocal enabledelayedexpansion
:: 避免输入中文出现乱码
chcp 65001 >nul

:: 设置你的仓库目录
::以下是set REPO_DIR="C:\Users\86166\Desktop\koa-1"的相对路径
::自动获取文件的路径
set REPO_DIR=%~dp0
::去除最后一个\
if "!REPO_DIR:~-1!" == "\" (
    set "REPO_DIR=!REPO_DIR:~0,-1!"
)
:: 切换到仓库目录
cd /d "%REPO_DIR%"

:: 检查是否有更改
for /f "delims=" %%i in ('git status --porcelain') do (
    if not "%%i" == "" (
        :: 如果有更改，则添加所有文件
        git add .

        :: 获取当前日期作为提交信息的一部分
        for /f "tokens=2-4 delims=/." %%a in ("%date%") do (
            set DATE=%%c/%%a/%%b
        )
        set TIME=%time:~0,8%
        set COMMIT_MSG=自动提交: %DATE% at %TIME%

        :: 提交更改
        git commit -m "!COMMIT_MSG!"

        :: 推送更改到远程仓库
        git push 
    )
)
 
:: 结束脚本
endlocal

::pause 会等待用户按任意键关闭窗口。

::如果没有pause,脚本会在执行完成后自动关闭窗口。
::下面的exit是退出脚本,填了和没填是一样的,因为exit是默认的,所以可以不写。
::exit通常是默认执行的,所以你甚至不需要显式添加它,除非你的脚本中有其他循环或者子命令可能会继续运行。
exit
```

